<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>espacio.RA ‚Äî rraum.LAB</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="espacio-ra.css">

  <!-- Librer√≠as RA: actualizadas -->
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/ar-js-org@3.4.6/aframe/build/aframe-ar.min.js"></script>
</head>
<body>

<header>
  <h1>espacio.RA</h1>
  <p class="muted">Visualizaci√≥n de modelos OBJ / STL</p>
</header>

<main>
  <section class="tool-main">
    <!-- Columna izquierda -->
    <div class="cube-inputs">
      <div class="actions">
        <!-- Selector de modo principal -->
        <select id="view-mode" aria-label="Modo de visualizaci√≥n">
          <option value="">Seleccione modo...</option>
          <option value="orbit">Visor 3D</option>
          <option value="ra">Realidad Aumentada</option>
        </select>

        <!-- Bot√≥n de carga -->
        <div class="cube-face">
          <button id="upload-btn" class="file-btn" title="Subir modelo" aria-label="Subir modelo" disabled>+</button>
          <span class="face-name">Subir modelo</span>
        </div>

        <!-- Botones de acci√≥n -->
        <button id="navigate-btn" disabled>Navegar</button>
        <button id="camera-btn" disabled style="display:none;">Acceder a c√°mara</button>
        <button id="marker-btn" style="display:none;">Descargar marcador</button>

        <!-- üîß NUEVOS SELECTORES -->
        <select id="viz-mode" aria-label="Modo de visualizaci√≥n del modelo">
          <option value="">Visualizaci√≥n...</option>
          <option value="solid">S√≥lido</option>
          <option value="wire">Al√°mbrico</option>
          <option value="light">Iluminado</option>
        </select>

        <select id="projection" aria-label="Modo de proyecci√≥n">
          <option value="">Proyecci√≥n...</option>
          <option value="perspective">Perspectiva</option>
          <option value="parallel">Paralela</option>
        </select>

        <select id="orientation" aria-label="Orientaci√≥n de c√°mara">
          <option value="">Orientaci√≥n...</option>
          <option value="top">Top</option>
          <option value="bottom">Bottom</option>
          <option value="front">Front</option>
          <option value="back">Back</option>
          <option value="left">Left</option>
          <option value="right">Right</option>
          <!-- Isometr√≠as paralelas -->
          <option value="iso_so">Isometr√≠a SO</option>
          <option value="iso_no">Isometr√≠a NO</option>
          <option value="iso_se">Isometr√≠a SE</option>
          <option value="iso_ne">Isometr√≠a NE</option>
          <!-- Isometr√≠a en perspectiva -->
          <option value="iso">Isom√©trica (perspectiva)</option>
        </select>
      </div>

      <div id="status" class="status">Seleccione un modo de visualizaci√≥n</div>
    </div>

    <!-- Columna derecha -->
    <div class="viewer-panel">
      <div id="viewer"></div>

      <div id="viewer-ra" style="display:none;">
        <a-scene
          embedded
          arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;"
        >
          <a-marker type="pattern" url="raumlab-logo.patt">
            <a-entity></a-entity>
          </a-marker>
          <a-entity camera></a-entity>
        </a-scene>
      </div>
    </div>
  </section>
</main>

<footer>By rraum.LAB</footer>

<!-- Librer√≠as Orbit -->
<script src="https://cdn.jsdelivr.net/npm/three@0.105.2/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/panolens@0.12.0/build/panolens.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.105.2/examples/js/loaders/OBJLoader.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.105.2/examples/js/loaders/STLLoader.js"></script>

<!-- L√≥gica -->
<script src="espacio-ra.js"></script>

<!-- Bloque de control de visores y men√∫s -->
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const viewMode = document.getElementById('view-mode');
    const projectionSelect = document.getElementById('projection');
    const orientationSelect = document.getElementById('orientation');
    const vizModeSelect = document.getElementById('viz-mode');

    // Orbit vs RA
    viewMode.addEventListener('change', e => {
      const mode = e.target.value;
      if (mode === 'orbit') {
        document.getElementById('viewer').style.display = 'block';
        document.getElementById('viewer-ra').style.display = 'none';
      } else if (mode === 'ra') {
        document.getElementById('viewer-ra').style.display = 'block';
        document.getElementById('viewer').style.display = 'none';
        document.body.classList.add('ra-fullscreen');
      }
    });

    // Listener de proyecci√≥n
    projectionSelect.addEventListener('change', e => {
      const proj = e.target.value;
      setProjectionMode(proj); // funci√≥n en espacio-ra.js
    });

    // Listener de orientaci√≥n
    orientationSelect.addEventListener('change', e => {
      const view = e.target.value;
      setCameraOrientation(view); // funci√≥n en espacio-ra.js
    });

    // Listener de visualizaci√≥n
    vizModeSelect.addEventListener('change', e => {
      const mode = e.target.value;
      setVisualizationMode(mode); // funci√≥n en espacio-ra.js
    });
  });
</script>
</body>
</html>
